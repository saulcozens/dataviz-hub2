{"version":3,"sources":["webpack:///./src/images/search/bg.jpg","webpack:///./src/components/search.jsx","webpack:///./src/pages/search.jsx"],"names":["module","exports","Search","state","query","results","componentDidMount","setTimeout","undefined","props","location","searchWord","queryHome","input","document","getElementById","setState","setAttribute","searchFromHome","search","event","target","value","length","getSearchResults","console","log","homeQuery","render","className","this","classNames","style","backgroundImage","bg","backgroundSize","width","top","duration","cascade","bottom","id","onChange","onInput","autoComplete","minWidth","type","name","placeholder","data","map","item","i","imagesrc","allMdx","edges","node","frontmatter","thumbnail","childImageSharp","fluid","src","image_set","no_image_1","no_image_2","no_image_3","no_image_4","no_image_5","Math","floor","random","title","split","splice","join","concat","description","highlightClasses","href","url","rel","key","backgroundPosition","borderRadius","maxWidth","highlightClassName","textToHighlight","searchWords","textShadow","author","arr","category","toUpperCase","tag","slice","index","window","__FLEXSEARCH__","en","store","Object","keys","forEach","idx","push","values","suggest","Array","from","Set","filter","includes","Component","searchPage","keywords"],"mappings":"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","file":"component---src-pages-search-jsx-b443b817fb3b449f5c13.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/bg-d2e315389be310ad1df988334939fa79.jpg\";","import React, { Component } from 'react'\nimport { graphql, useStaticQuery } from 'gatsby'\nimport PropTypes from \"prop-types\"\nimport {FiSearch} from \"react-icons/fi\"\nimport Highlighter from 'react-highlight-words';\n//import kebabCase from \"lodash.kebabcase\"\nimport no_image_1 from \"../images/blog/no_image_1.png\"\nimport no_image_2 from \"../images/blog/no_image_2.png\"\nimport no_image_3 from \"../images/blog/no_image_3.png\"\nimport no_image_4 from \"../images/blog/no_image_4.png\"\nimport no_image_5 from \"../images/blog/no_image_5.png\"\nimport Zoom from 'react-reveal/Zoom'\nimport Fade from 'react-reveal/Fade'\nimport bg from \"../images/search/bg.jpg\"\n\n// Search component\nclass Search extends Component {\n\n  state = {\n    query: '',\n    results: [],\n  }\n\n  componentDidMount = () => {\n    setTimeout(() => {\n      if(this.props.location.state.searchWord !== undefined) {\n        var queryHome = this.props.location.state.searchWord\n        var input = document.getElementById(\"pageSearch\")\n        this.setState({query: queryHome})\n        input.setAttribute(\"value\", queryHome)\n        this.searchFromHome(queryHome)\n      }\n    }, 100);\n  }\n\n  render() {\n    const ResultList = () => {\n      // query length changed from 2 to 0\n      if (this.state.results.length > 0 && this.state.query.length > 0) {\n        const data = useStaticQuery(graphql`\n          query postList {\n            allMdx(sort: {fields: [frontmatter___date], order: DESC}) {\n              edges {\n                node {\n                  id\n                  frontmatter {\n                    date(formatString: \"ddd, DD MMM YYYY\")\n                    thumbnail {\n                      childImageSharp {\n                        fluid {\n                          src\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        `)\n\n        return (\n          <div>\n            <div className=\"bg-orange-700 text-gray-100 py-2\">Found {this.state.results.length} results for you.</div>\n\n            <div className=\"flex flex-wrap py-10 xl:pt-32 xl:pb-64 justify-center bg-gray-100\">\n              {this.state.results.map((item, i) => {\n                let imagesrc\n  \n                {data.allMdx.edges.map(({ node }) => {\n                  if(item.id == node.id){\n                    if(node.frontmatter && node.frontmatter.thumbnail && node.frontmatter.thumbnail.childImageSharp) {\n                      imagesrc = node.frontmatter.thumbnail.childImageSharp.fluid.src \n                    } else {\n                      let image_set = [no_image_1, no_image_2, no_image_3, no_image_4, no_image_5]\n                      imagesrc = image_set[Math.floor(Math.random() * image_set.length)]\n                    }\n                  }\n                })}\n\n                let title = item.title.split(\" \").splice(0, 8)\n                if(title.length < 8){\n                  title = title.join(\" \")\n                } else {\n                  title = title.join(\" \").concat(\" ...\")\n                }\n\n                let description = item.description.split(\" \").splice(0, 30)\n                if(description.length < 30){\n                  description = description.join(\" \")\n                } else {\n                  description = description.join(\" \").concat(\" ...\")\n                }\n\n                const highlightClasses = \"text-blue-400 bg-black\"\n\n                return( \n\n                  <a href={`${item.url}`} target=\"_blank\" rel=\"noopener noreferrer\" key={i}>\n                    <div style={{width: \"363px\", backgroundImage: `url(${imagesrc})`, backgroundSize: \"cover\", backgroundPosition: \"center\", borderRadius: \"15px\"}} className=\"group text-left relative shadow-c1 hover:shadow-c2 rounded-lg min-h-50 2xl:min-h-40 mx-6 my-6 transform hover:scale-105 transition duration-500\">\n                      <div className=\"min-h-60 2xl:min-h-40 max-h-60 w-full p-6 transition duration-700 bg-black-45 group-hover:bg-black-85\" style={{borderRadius: \"15px\"}}>\n                        <div className=\"absolute pt-8 lg:pt-16 2xl:pt-24 overflow-hidden\" style={{maxWidth:\"320px\"}}>\n                          <h1 className=\"group-hover:-translate-y-8 text-white font-bold leading-7 text-2xl transform transition duration-100\">\n                            <Highlighter highlightClassName={highlightClasses} textToHighlight={title} searchWords={this.state.query.split()} />\n                          </h1>  \n                          <h1 className=\"group-hover:hidden text-gray-400 leading-7 my-4 font-bold text-lg transition duration-500\" style={{textShadow: \"#000 0px 0px 30px\"}}>\n                            {item.author.map((author, i, arr) => {\n                              return ( <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={arr.length - 1 === i ? author : author.concat(\", \")} searchWords={this.state.query.split()} key={author} /> )\n                            })}\n                          </h1>\n                          <h1 className=\"group-hover:hidden text-gray-400 font-bold transition duration-500\">\n                            CAT: &nbsp;\n                            <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={item.category[0].toUpperCase()} searchWords={this.state.query.split()} />\n                          </h1>\n                          <h1 className=\"group-hover:hidden text-gray-400 font-bold transition duration-500\">\n                            TAG: &nbsp;{item.tag.map((tag, i, arr) => {\n                              return ( i < 3 && <Highlighter className=\"text-white\" highlightClassName={highlightClasses} textToHighlight={arr.length - 1 === i ? tag.toUpperCase() : tag.toUpperCase().concat(\", \")} searchWords={this.state.query.split()} key={tag} /> )\n                            })}\n                            {item.tag.length > 3 && <p className=\"inline-block text-white\"> +{item.tag.length - 3} more</p>}\n                          </h1>\n                          <p className=\"hidden group-hover:block my-4 text-xxs text-gray-500 w-full font-semibold transform group-hover:-translate-y-12 transition duration-500\"><Highlighter highlightClassName={highlightClasses} textToHighlight={item.url.slice(5,).toUpperCase()} searchWords={this.state.query.split()} /></p>\n                          <h1 className=\"hidden group-hover:block text-white leading-5 text-lg py-3 transform group-hover:-translate-y-12 transition duration-500\"><Highlighter highlightClassName={highlightClasses} textToHighlight={description} searchWords={this.state.query.split()} /></h1>      \n                        </div>\n                      </div>\n                    </div>\n                  </a>\n                )\n                })}\n          </div>\n         </div>\n        )\n      } \n      // else if (this.state.query.length > 2) {\n      //   return (\n      //     <div className=\"bg-orange-700 text-gray-100 py-2\">No results for {this.state.query}</div>\n      //   )\n          \n      // } else if (this.state.query.length > 0) {\n      //   return (\n      //     <div className=\"bg-orange-700 text-gray-100 py-2\">Please insert at least 3 characters</div>\n      //   )\n      // } \n      else if (this.state.query.length > 0) {\n        return (\n          <div className=\"bg-orange-700 text-gray-100 py-2\">No results for {this.state.query}</div>\n        )\n      }\n      else {\n        return (\n          <div className=\"bg-orange-700 text-gray-100 py-2\">Awaiting for your input ...</div>\n        )\n      }\n    }\n\n    return (\n      <div className={`${this.props.classNames} relative text-gray-700 w-full text-center`}>\n        <div className=\"min-h-50 pt-24 pb-10\" style={{backgroundImage: `url(${bg})`, backgroundSize: \"cover\", width: \"100%\",}}>\n          <Zoom top duration={1000} cascade><p className=\"text-2xl xl:text-3xl text-white mb-3 font-semibold\">Search@dataviz.shef</p></Zoom>\n          <Fade bottom duration={1500}>\n            <div className=\"inline-block focus:outline-none text-gray-600 bg-white shadow p-3 rounded-lg\">\n              <FiSearch className=\"inline-block text-center text-3xl -mt-1\" />\n              <input id=\"pageSearch\" onChange={this.search} onInput={this.search} autoComplete=\"off\" className=\"search__input py-0 pl-4 text-lg focus:outline-none pr-5 text-gray-600\" style={{minWidth: \"25vw\"}} type=\"text\" name=\"search\" placeholder=\"Title, description, date...\" />\n            </div>\n          </Fade>\n        </div>\n        <div className=\"search__list bg-gray-100\">\n          <ResultList />\n        </div>\n      </div>\n    )\n  }\n\n  getSearchResults(query) {\n    //index - a flexsearch index instance (variables set in gatsby-config)\n    //store - object that stores the indexed gatsby nodes where the id of each node corresponds to the id the filter, according with flexsearch.js best practices (https://github.com/nextapps-de/flexsearch#best-practices)).\n\n    var index = window.__FLEXSEARCH__.en.index\n    var store = window.__FLEXSEARCH__.en.store\n    if (!query || !index) {\n      return []\n    } else {\n      var results = []\n      // search the indexed fields\n      Object.keys(index).forEach(idx => {\n        results.push(...index[idx].values.search({\n          query: query,\n          suggest: true,\n        }))\n      })\n      // find the unique ids of the nodes\n      results = Array.from(new Set(results))\n\n      // return the corresponding nodes in the store\n      var nodes = store\n        .filter(node => (results.includes(node.id) ? node : null))\n        .map(node => node.node)\n\n      return nodes\n    }\n  }\n\n  search = (event) => {\n    const query = event.target.value\n    if (this.state.query.length > -1) {\n      const results = this.getSearchResults(query)\n      console.log(results)\n      this.setState({ results: results, query: query })\n    } else {\n      this.setState({ results: [], query: query })\n    }\n  }\n\n  searchFromHome = (homeQuery) => {\n    const query = homeQuery\n    if (this.state.query.length > -1) {\n      const results = this.getSearchResults(query)\n      this.setState({ results: results, query: query })\n    } else {\n      this.setState({ results: [], query: query })\n    }\n  }\n}\n\nexport default Search\n\n\n\nSearch.propTypes = {\n  classNames: PropTypes.any,\n  data: PropTypes.any,\n  location: PropTypes.any,\n}\n\n\n","import React from \"react\"\nimport SEO from \"../components/seo\"\nimport Header from \"../components/header\"\nimport Footer from \"../components/footer\"\n//import BackgroundSection from \"../components_images/search_background\"\nimport PropTypes from \"prop-types\"\nimport Search from \"../components/search\"\n\n\nconst searchPage = ({location}) => {\n\n  return (\n    \n    <>\n      <SEO \n        title=\"Search\" \n        keywords={[\"the university of sheffield\", \"data visualisation\", \"data visualisation hub\", \"research\", \"dataviz.shef\", \"search dataviz\"]} \n      />\n      <Header />\n      <div className=\"flex flex-wrap\">\n        \n        <Search location={location} />\n  \n      </div>\n      <Footer />\n    </>\n  )\n}\n\nexport default searchPage\n\nsearchPage.propTypes = {\n    data: PropTypes.any,\n    location: PropTypes.any\n  }\n  \n  "],"sourceRoot":""}